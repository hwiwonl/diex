\input{warning}

% Pass options to packages that might be loaded by style files
\PassOptionsToPackage{usenames,dvipsnames}{xcolor}
\PassOptionsToPackage{breaklinks,colorlinks}{hyperref}

% Load basic packages first
\usepackage{amsmath,amsopn}
\ifacmccs
\usepackage{epsfig,endnotes}
\else
\ifcolm
\usepackage{amssymb,mathtools,amsthm,lastpage,relsize}
\else
\usepackage{amssymb,mathtools,amsthm,fancyhdr,lastpage,times}
\fi
\fi

\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{latexsym}
\usepackage{subfigure}
\usepackage{endnotes,microtype,xspace,graphicx,fancyvrb,multirow}
\usepackage{booktabs}
\usepackage{array,underscore,relsize}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{enumitem}
\usepackage{pifont}
\usepackage[labelfont=bf,font=small,skip=5pt]{caption}

\usepackage[textsize=tiny]{todonotes}

% Load url package
\usepackage{url}

% Load natbib (conditionally)
\ifacmccs
% ACM CCS uses natbib by default, so we don't need to load it
\PassOptionsToPackage{numbers,sort&compress}{natbib}
\else\ifneurips
\PassOptionsToPackage{numbers,sort&compress}{natbib}
\else\ificml
\PassOptionsToPackage{numbers,sort&compress}{natbib}
\else\ificlr
\PassOptionsToPackage{numbers,sort&compress}{natbib}
\else
\PassOptionsToPackage{square,comma,numbers,sort&compress}{natbib}
\fi\fi\fi\fi

% Page style
\ifdefault
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\cfoot{\thepage}
\fi

% For math macro and numbers
\usepackage{fp}
\usepackage{siunitx}

% Pseudo code
\usepackage{minted}

% Balance bibliography
\usepackage{balance}

% Use \num{123456} -> 123,456
\sisetup{group-separator={,},group-minimum-digits={3},output-decimal-marker={.}}

% Make sure this is in your main .tex file, not in pkgs.tex
% \bibliography{p,conf}

% Before loading hyperref, add:
% \makeatletter
% \def\@URL#1{\href{#1}{\nolinkurl{#1}}}
% \makeatother

\ifcolm
\ifcolmsubmission
\linenumbers
\fi

% Then your existing hyperref setup
\usepackage{lineno}
\usepackage{hyperref}
\hypersetup{
  citecolor=blue,
  linkcolor=blue,
  breaklinks=true,
  urlcolor=blue
}
% if you use cleveref..
\usepackage[capitalize,noabbrev]{cleveref}

% Table
\usepackage{tabularx}
\usepackage{multicol}
\usepackage{makecell}
\usepackage{adjustbox}
\usepackage[normalem]{ulem}
\usepackage{tcolorbox}